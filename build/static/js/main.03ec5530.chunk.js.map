{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","services/pixabay.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","searchValue","handleSearchSubmit","e","preventDefault","trim","props","onSubmit","setState","toast","warn","handleSearchChange","target","value","toLowerCase","this","className","s","searchbar","searchForm","type","searchButton","searchButtonLabel","searchInput","name","autocomplete","autofocus","placeholder","onChange","Component","PixabayFetch","_searchQuery","_page","perPage","fetch","page","axios","get","then","result","data","hits","catch","err","console","log","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","modalImg","tags","createPortal","overlay","onClick","modal","src","alt","ImageGalleryItem","id","webformatURL","largeImageURL","showModal","galleryItem","imageGalleryItem","propsTypes","PropTypes","string","func","bool","Button","button","newPixabayFetch","ImageGallery","searchResult","error","loader","onLoadMore","searchPhotos","prevState","ScrollImages","scrollTo","top","documentElement","scrollHeight","behavior","onClickModalImg","img","dataset","prevProps","resetPage","searchQuery","length","color","height","width","timeout","gallery","map","App","getFormSubmitValue","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.03ec5530.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__jo466\",\"searchForm\":\"Searchbar_searchForm__23jwf\",\"searchButton\":\"Searchbar_searchButton__1Ml9x\",\"searchButtonLabel\":\"Searchbar_searchButtonLabel__2BLFE\",\"searchInput\":\"Searchbar_searchInput__1DwaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"galleryItem\":\"ImageGalleryItem_galleryItem__QDCHF\",\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__1LEDw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__gboaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\"};","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { toast } from \"react-toastify\";\nimport s from \"../Searchbar/Searchbar.module.css\";\n\nexport class Searchbar extends Component {\n  state = {\n    searchValue: \"\",\n  };\n\n  handleSearchSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.searchValue.trim() === \"\") {\n      toast.warn(\"Enter a name to search!\");\n      return;\n    }\n    this.props.onSubmit(this.state.searchValue);\n    this.setState({ searchValue: \"\" });\n  };\n\n  handleSearchChange = (e) => {\n    this.setState({ searchValue: e.target.value.toLowerCase() });\n  };\n\n  render() {\n    const { handleSearchSubmit, handleSearchChange } = this;\n    const { searchValue } = this.state;\n    return (\n      <header className={s.searchbar}>\n        <form className={s.searchForm} onSubmit={handleSearchSubmit}>\n          <button type=\"submit\" className={s.searchButton}>\n            <span className={s.searchButtonLabel}>Search</span>\n          </button>\n          <input\n            className={s.searchInput}\n            type=\"text\"\n            name=\"value\"\n            value={searchValue}\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n            onChange={handleSearchChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  handleSearchChange: PropTypes.func.isRequired,\n  handleSearchSubmit: PropTypes.func.isRequired,\n  searchValue: PropTypes.string.isRequired,\n};\n","import axios from \"axios\";\n\nexport class PixabayFetch {\n  constructor() {\n    this._searchQuery = \"\";\n    this._page = 1;\n    this.perPage = 12;\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  searchPhotos() {\n    const url = \"https://pixabay.com/api/\";\n    const apiKey = \"23141272-55f7853bfecadbbcd9800c5ad\";\n    const params = `?key=${apiKey}&q=${this._searchQuery}&page=${this.page}&image_type=photo&orientation=horizontal&per_page=${this.perPage}`;\n    const fetch = url + params;\n    return axios\n      .get(fetch)\n      .then((result) => {\n        // console.log(result);\n        return result.data;\n      })\n      .then((data) => {\n        // console.log(data.hits);\n        return data.hits;\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { createPortal } from \"react-dom\";\nimport s from \"../Modal/Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.toggleModal();\n    }\n  };\n\n  handleBackdropClick = (e) => {\n    if (e.currentTarget === e.target) {\n      this.props.toggleModal();\n    }\n  };\n\n  render() {\n    const { handleBackdropClick } = this;\n    const { modalImg, tags } = this.props;\n    return createPortal(\n      <div className={s.overlay} onClick={handleBackdropClick}>\n        <div className={s.modal}>\n          <img src={modalImg} alt={tags} />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nModal.propTypes = {\n  handleBackdropClick: PropTypes.func.isRequired,\n  modalImg: PropTypes.string,\n  tags: PropTypes.string,\n};\n","import Modal from \"../Modal/Modal\";\nimport PropTypes from \"prop-types\";\nimport s from \"../ImageGalleryItem/ImageGalleryItem.module.css\";\n\nexport function ImageGalleryItem({\n  id,\n  webformatURL,\n  tags,\n  largeImageURL,\n  modalImg,\n  onClick,\n  showModal,\n  toggleModal,\n}) {\n  return (\n    <>\n      <li className={s.galleryItem} key={id}>\n        <img\n          src={webformatURL}\n          alt={tags}\n          data-img={largeImageURL}\n          className={s.imageGalleryItem}\n          onClick={onClick}\n        />\n      </li>\n      {showModal && (\n        <Modal modalImg={modalImg} alt={tags} toggleModal={toggleModal} />\n      )}\n    </>\n  );\n}\n\nImageGalleryItem.propsTypes = {\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  onClick: PropTypes.func,\n  modalImg: PropTypes.string,\n  showModal: PropTypes.bool,\n  toggleModal: PropTypes.func,\n};\n","import PropTypes from \"prop-types\";\nimport s from \"../Button/Button.module.css\";\n\nexport function Button({ onClick }) {\n  return (\n    <button className={s.button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport s from \"../ImageGallery/ImageGallery.module.css\";\nimport { PixabayFetch } from \"../../services/pixabay\";\nimport { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\nimport { Button } from \"../Button/Button\";\nimport \"../../../node_modules/react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport { toast } from \"react-toastify\";\n\nconst newPixabayFetch = new PixabayFetch();\n\nexport class ImageGallery extends Component {\n  state = {\n    searchResult: [],\n    error: null,\n    // status: \"idle\",\n    showModal: false,\n    loader: false,\n    modalImg: \"\",\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.value !== this.props.value) {\n      newPixabayFetch.resetPage();\n      this.setState({ loader: true });\n      newPixabayFetch.searchQuery = this.props.value;\n      newPixabayFetch\n        .searchPhotos()\n        .then((searchResult) => {\n          if (searchResult.length === 0) {\n            toast.warn(\"Nothihg found for this name! Enter correct name!\");\n            this.setState({ searchResult: [] });\n            return;\n          }\n          this.setState({ searchResult, loader: false });\n        })\n        .catch((error) => this.setState({ error }));\n    }\n  }\n\n  onLoadMore = () => {\n    newPixabayFetch.page = 1;\n    this.setState({ loader: true });\n    newPixabayFetch\n      .searchPhotos()\n      .then((searchResult) => {\n        this.setState((prevState) => ({\n          searchResult: [...prevState.searchResult, ...searchResult],\n          loader: false,\n        }));\n      })\n      .then(this.ScrollImages)\n      .catch((error) => this.setState({ error }));\n  };\n\n  ScrollImages = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onClickModalImg = (e) => {\n    const { img } = e.target.dataset;\n    this.setState({ modalImg: img });\n    this.toggleModal();\n  };\n\n  render() {\n    const { loader, searchResult, modalImg, showModal } = this.state;\n    const { toggleModal, onClickModalImg, onLoadMore } = this;\n    return (\n      <>\n        {loader && (\n          <Loader\n            type=\"Bars\"\n            color=\"#00BFFF\"\n            height={200}\n            width={200}\n            timeout={3000}\n          />\n        )}\n        <ul className={s.gallery}>\n          {searchResult.length > 0 &&\n            searchResult.map(({ id, webformatURL, tags, largeImageURL }) => (\n              <ImageGalleryItem\n                onClick={onClickModalImg}\n                key={id}\n                id={id}\n                webformatURL={webformatURL}\n                tags={tags}\n                largeImageURL={largeImageURL}\n                modalImg={modalImg}\n                showModal={showModal}\n                toggleModal={toggleModal}\n              />\n            ))}\n        </ul>\n        {searchResult.length >= 12 && <Button onClick={onLoadMore} />}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  id: PropTypes.number,\n  webformatURL: PropTypes.string,\n  tags: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  modalImg: PropTypes.string,\n  showModal: PropTypes.bool,\n  toggleModal: PropTypes.func,\n  onLoadMore: PropTypes.func,\n};\n\n// StateMachine\n//   if (this.state.status === 'idle') {\n//     return <h1>Enter name to find</h1>;\n//   }\n\n//   if (this.state.status === 'pending') {\n//     return <Loader />;\n//   }\n\n//   if (this.state.status === 'rejected') {\n//     return <h1>Error</h1>;\n//   }\n\n//   if (this.state.status === 'resolved') {\n//     return (\n//       <>\n//         <ul className=\"ImageGallery\">\n//           {this.state.searchResult.length > 0 &&\n//             this.state.searchResult.map(\n//               ({ id, webformatURL, tags, largeImageURL }) => (\n//                 <ImageGalleryItem\n//                   onClick={this.onClickModalImg}\n//                   key={id}\n//                   id={id}\n//                   webformatURL={webformatURL}\n//                   tags={tags}\n//                   largeImageURL={largeImageURL}\n//                   modalImg={this.state.modalImg}\n//                   showModal={this.state.showModal}\n//                   toggleModal={this.toggleModal}\n//                 />\n//               )\n//             )}\n//         </ul>\n//         {this.state.searchResult.length >= 12 && (\n//           <Button onClick={this.onLoadMore} />\n//         )}\n//       </>\n//     );\n//   }\n","import { Component } from \"react\";\nimport \"./App.css\";\nimport { Searchbar } from \"./components/Searchbar/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"../node_modules/react-toastify/dist/ReactToastify.css\";\n\nclass App extends Component {\n  state = {\n    value: \"\",\n  };\n\n  getFormSubmitValue = (value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    const { getFormSubmitValue } = this;\n    const { value } = this.state;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={getFormSubmitValue} />\n        <ImageGallery value={value} />\n        <ToastContainer position=\"top-left\" autoClose={3000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}